<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12/12/2025</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&family=Playfair+Display:ital,wght@0,700;1,400&display=swap" rel="stylesheet">
    
    <style>
        /* --- ESTILOS GENERALES --- */
        body { 
            font-family: 'Montserrat', sans-serif; 
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
            overflow-x: hidden;
            margin: 0;
        }
        
        [v-cloak] { display: none; }

        /* --- FONDO ANIMADO HIBISCUS (LOGIN) --- */
        .login-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 1.5s cubic-bezier(0.86, 0, 0.07, 1);
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- TARJETA DE LOGIN --- */
        .login-card {
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.15);
            max-width: 400px;
            width: 90%;
            text-align: center;
            color: white;
        }

        .login-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: #fff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .custom-input {
            background: rgba(255, 255, 255, 0.6);
            border: none;
            border-radius: 50px;
            padding: 15px 25px;
            width: 100%;
            text-align: center;
            font-size: 1.1rem;
            color: #555;
            transition: all 0.3s;
            outline: none;
        }
        .custom-input:focus {
            background: white;
            box-shadow: 0 0 15px rgba(255,255,255,0.5);
        }

        .btn-enter {
            background: #fff;
            color: #ff9a9e;
            border: none;
            border-radius: 50px;
            padding: 10px 30px;
            font-weight: bold;
            margin-top: 20px;
            transition: transform 0.2s;
        }
        .btn-enter:hover {
            transform: scale(1.05);
            color: #e73c7e;
        }

        /* --- PISTAS --- */
        .hints-container {
            margin-top: 20px;
            display: flex; flex-direction: column; gap: 8px; align-items: center;
        }
        .hint-badge {
            font-size: 0.9rem; color: #fff; font-weight: 500;
            background: rgba(0,0,0,0.2); padding: 8px 15px; border-radius: 20px;
            display: inline-block; width: 100%;
            animation: slideIn 0.5s ease forwards; opacity: 0; transform: translateY(10px);
        }
        @keyframes slideIn { to { opacity: 1; transform: translateY(0); } }

        /* --- ANIMACIONES LOGIN --- */
        .shake { animation: shake 0.5s; }
        @keyframes shake {
            0% { transform: translateX(0); } 25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); } 75% { transform: translateX(-10px); }
            100% { transform: translateX(0); }
        }

        .circle {
            position: absolute; border-radius: 50%; background: rgba(255, 255, 255, 0.3);
            animation: float 6s infinite ease-in-out; z-index: -1;
        }
        @keyframes float {
            0% { transform: translateY(0px); } 50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        .slide-up-fade {
            transform: translateY(-100%);
            pointer-events: none;
        }

        /* ============================================================
           ESTILOS PARA LA HISTORIA
           ============================================================ */
        
        .background-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
            background: linear-gradient(-45deg, #ff9a9e, #fad0c4, #fbc2eb, #a18cd1);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }

        .story-wrapper {
            position: relative;
            z-index: 10;
            padding: 40px 20px;
        }

        .story-block { 
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
        }
        
        .story-card {
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 25px;
            padding: 2.5rem 2rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            text-align: justify;
            color: #3d3d3d;
            width: 100%;
            max-width: 700px;
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.8s ease-out;
        }
        
        .story-block.visible .story-card {
            opacity: 1;
            transform: translateY(0);
        }

        .story-title {
            font-family: 'Playfair Display', serif;
            color: #2d2d2d;
            margin-bottom: 1.5rem;
            font-size: 2rem;
            text-align: center;
        }

        .story-text {
            font-size: 1.05rem;
            line-height: 1.9;
            color: #3d3d3d;
        }

        /* --- CARRUSEL DE FOTOS --- */
        .carousel-container {
            position: relative;
            width: 100%;
            margin-bottom: 1.5rem;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            background: rgba(0,0,0,0.1);
        }

        .carousel-inner {
            position: relative;
            width: 100%;
            height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-image {
            position: absolute;
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            opacity: 0;
            transition: opacity 0.8s ease-in-out;
            border-radius: 10px;
        }

        .carousel-image.active {
            opacity: 1;
        }

        .carousel-controls {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .carousel-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            cursor: pointer;
            transition: all 0.3s;
        }

        .carousel-dot.active {
            background: #fff;
            transform: scale(1.2);
        }

        .carousel-arrows {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 100%;
            display: flex;
            justify-content: space-between;
            padding: 0 10px;
            box-sizing: border-box;
            z-index: 10;
        }

        .carousel-arrow {
            background: rgba(255,255,255,0.7);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .carousel-arrow:hover {
            background: #fff;
            transform: scale(1.1);
        }

        /* Estilos Cupones */
        .coupons-view { 
            background-color: #fdfbfb; min-height: 100vh; 
            padding-top: 80px; position: relative; z-index: 20;
            animation: fadeIn 1s ease;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    </style>
</head>
<body>

    {% verbatim %}
    <div id="app" v-cloak>

        <!-- PANTALLA DE LOGIN -->
        <div class="login-screen" :class="{ 'slide-up-fade': currentPhase !== 'login' }">
            
            <div class="circle" style="width: 100px; height: 100px; top: 10%; left: 10%;"></div>
            <div class="circle" style="width: 150px; height: 150px; bottom: 20%; right: 10%; animation-delay: 2s;"></div>
            
            <div class="login-card" :class="{ 'shake': isShaking }">
                <h1 class="login-title">Felices 4 a√±os!</h1>
                <p class="mb-4 small">Ingresa la palabra clave para entrar</p>
                
                <form @submit.prevent="checkPassword">
                    <input type="text" v-model="passwordInput" class="custom-input" placeholder="..." autocomplete="off">
                    <button type="submit" class="btn-enter mt-3">ENTRAR</button>
                </form>

                <div class="hints-container" v-if="hintsList.length > 0">
                    <div v-for="(hint, index) in hintsList" :key="index" class="hint-badge">
                        üí° Pista {{ index + 1 }}: {{ hint }}
                    </div>
                </div>
            </div>
        </div>

        <!-- SECCIONES DE LA CARTA -->
        <div v-show="currentPhase === 'letter'">
            
            <div class="background-layer">
                <div class="circle" style="width: 120px; height: 120px; top: 5%; left: 5%;"></div>
                <div class="circle" style="width: 80px; height: 80px; top: 15%; right: 10%; animation-delay: 1s;"></div>
                <div class="circle" style="width: 150px; height: 150px; bottom: 30%; left: 8%; animation-delay: 2s;"></div>
                <div class="circle" style="width: 100px; height: 100px; bottom: 10%; right: 15%; animation-delay: 3s;"></div>
            </div>

            <div class="story-wrapper">
                <div v-for="(segment, index) in letterSegments" :key="index" :id="'seg-'+index" class="story-block">
                    <div class="story-card">
                        
                        <!-- T√≠tulo si existe -->
                        <h3 v-if="segment.title" class="story-title">{{ segment.title }}</h3>
                        
                        <!-- Carrusel si existe -->
                        <div v-if="segment.carousel && carouselImages[segment.carousel]" class="carousel-container">
                            <div class="carousel-inner">
                                <img 
                                    v-for="(img, imgIndex) in carouselImages[segment.carousel]" 
                                    :key="imgIndex"
                                    :src="img"
                                    :class="['carousel-image', { active: carouselIndexes[segment.carousel] === imgIndex }]"
                                    alt="Foto"
                                >
                            </div>
                            <div class="carousel-arrows">
                                <button class="carousel-arrow" @click="prevImage(segment.carousel)">‚ùÆ</button>
                                <button class="carousel-arrow" @click="nextImage(segment.carousel)">‚ùØ</button>
                            </div>
                            <div class="carousel-controls">
                                <span 
                                    v-for="(img, imgIndex) in carouselImages[segment.carousel]" 
                                    :key="imgIndex"
                                    :class="['carousel-dot', { active: carouselIndexes[segment.carousel] === imgIndex }]"
                                    @click="goToImage(segment.carousel, imgIndex)"
                                ></span>
                            </div>
                        </div>
                        
                        <!-- Texto -->
                        <div class="story-text" v-html="segment.text"></div>

                        <!-- Bot√≥n final -->
                        <div v-if="index === letterSegments.length - 1" class="text-center mt-5">
                            <a href="/cupones/" class="btn btn-lg btn-danger rounded-pill px-5 shadow" style="background-color: #e73c7e; border: none; text-decoration: none;">
                                üéÅ Abrir Regalo Final
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    {% endverbatim %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        const { createApp } = Vue

        createApp({
            data() {
                return {
                    currentPhase: 'login',
                    passwordInput: '',
                    correctPassword: 'rinoceronte',
                    attempts: 0,
                    hintsList: [],
                    isShaking: false,

                    // Im√°genes de cada carrusel
                    carouselImages: {},
                    carouselIndexes: {},
                    carouselIntervals: {},

                    // Secciones de la carta
                    letterSegments: [
                        {
                            title: "üíï Feliz 4 a√±os! üíï",
                            text: `Hola mi Flo, bienvenida a esta gran locurita que es tu regalo de 4 a√±os estuve pensando mucho tiempo, en qu√© te puedo regalar y s√© que soy bueno para las manualidades y que te he regalado muchas cosas locas y quer√≠a tambi√©n hacer algun regalo loco para estos 4 a√±os como soy un emprendedor desarrollador computin y tambi√©n un poco perkin, quise hacer esta p√°gina como regalo tuyo para encapsular un todos nuestros recuerdos y locuritas. üéÅ
                            <br><br>
                            En esta locura de regalo vamos a pasar por distintos viajes y momentos que me hacen recordar lo mucho que te amo y lo feliz que me has hecho durante todos estos 4 a√±os que hemos estado juntos. 4 a√±os que son caleta de a√±os. ¬øCu√°ntos a√±os son 4 a√±os? 4 a√±os. muchos a√±ooos. ü•≥`
                        },
                      
                        {
                            carousel: "conocimos",
                            text: `Es loco pensar que hace un poco m√°s de 4 a√±os atr√°s nos conocimos en pandemia y luego coincidimos en ese carrete en mi casa, demasiado random, con gente muy random pero que yo creo que dio inicio a una amistad muy bonita que dio paso a una relaci√≥n perfecta que hasta el d√≠a de hoy me cuesta creer lo perfecta que es. `
                        },
                        {
                            carousel: "proyecta",
                            text: `Gracias Proyecta, que es loco pensar que en este voluntariado que quiero mucho, me hizo conocer a una de las personas m√°s importantes de mi vida. Yo creo que es algo que nunca voy a poder agradecer lo suficiente.
                            <br><br>
                            No solo aca crec√≠ como persona sino que te conoc√≠ a ti, que me mostr√≥ que existen personas de mi mismo pensamiento, y que compartimos las mismas cosas y gustos, y que calzamos perfecto. Por eso compr√© un boxer de 50 lucas. Lo hice por ti, no de impulsividad jejejej ü©≤`
                        },
                        {
                            carousel: "amigos",
                            text: `Me gusta saber que adem√°s de que calzamos mucho, coincidimos tambi√©n en nuestras amistades. Siento que, con nombre QLO, que es un grupo que yo siempre le he tenido mucho cari√±o, y me encanta que t√∫ tambi√©n te hayas unido a este como si fueran amigos de toda la vida, y que tambi√©n ellos te tengan cari√±o.
                            <br><br>
                            Tambien me gusta que yo me he llevado bien con tus amigos, con la Chio, con las Fers, la Coni, el Chandi, el Santi, el Cris. Al final es cierto que tambi√©n una base importante de la relaci√≥n es poder congeniar con las amistades y ser un aporte m√°s que una molestia. Y me encanta eso de nosotros, que podamos pasarlo bien con las personas que m√°s queremos y compartir tambi√©n esos momentos.`
                        },
                        {
                            carousel: "familia",
                            text: `Y as√≠ mismo, como congeniamos con los amigos, una cosa que m√°s me gusta es c√≥mo congeniamos con nuestras familias. Me encanta que t√∫ ya eres parte de la m√≠a, yo me siento ya parte de la tuya, y que tanto mi familia como tu familia nos quieran mucho, y es bac√°n tambi√©n que ambas familias se lleven bien.
                            <br><br>
                            Siento que ambos tenemos un ambiente de familia muy parecido. Y siento que eso tambi√©n aporta mucho a que todo fluya muy bien. Te amoooooooooo! ‚ù§Ô∏è`
                        },
                        {
                            carousel: "viajes",
                            text: `Ni te explico la cantidad de foto que hay de viajes jajajaj. Encuentro muy bac√°n que hemos tenido la oportunidad de viajar por Chile, viajar fuera de Chile, compartir viajes con tu familia, tambi√©n con mi familia, y saber que disfrutamos estar juntos, estar con nuestra familia, conocer y disfrutar de la buena vida.
                            <br><br>
                            Ahora se viene nuestro primer viaje solitos a Disney World, que me tiene muy feliz y muy ansioso. Y espero con muchas ansias poder ir y pasarrloo bombaaaaa. üè∞`
                        },
                        {
                            carousel: "carrera",
                            text: `Bueno, y otra cosa que admiro mucho de ti es la pasi√≥n que le tienes a tu carrera. Se nota mucho el amor y cari√±o que le pones a todo lo que haces, y en especial a esta carrera que es tan sacrifiada.
                            <br><br>
                            Y me encanta verte con esa pasi√≥n, aportando en voluntariados, aportando tu granito de arena, tu saco de arena, tus toneladas de arena a todo lo que haces. Y yo s√©, estoy m√°s que seguro, de que vas a lograr muchas cosas, vas a ser la mejor trabajadora social que va a tener Chile y el mundo. Y me encanta ver c√≥mo logras cada meta que te propones. Te amo mucho mi trabajadora sexual. üòè`
                        },
                        {
                            carousel: "comida",
                            text: `Y obviamente no pueden faltar todas las fotos de los lugares donde hemos salido a comer. Yo s√© que nos encanta la vida de ricos y famosos, y disfrutar de un buen lomo salteado, de unos buenos tallerines a la huancaina, y me encanta poder disfrutar esos momentos, poder conversar, hablar, escucharnos, y al final disfrutar la vida, porque para eso estamos, para ser felices y comer rico. üçΩÔ∏è`
                        },
                        {
                            carousel: "nosotros",
                            text: `Tambi√©n es lindo ver todos esos momentos que hemos tenido juntos. Los panoramas locos que se nos ocurren, salir a caminar, andar en bici, ir a la playa, ir a ver boxeo, cine 4dx jajaja.
                            <br><br>
                            Yo creo que ser personas que nos gusta andar movi√©ndonos y hacer panoramas locos es lo m√°s entretenido. Al final, una vida as√≠ es bac√°n, es feliz, y me encanta que podamos compartir tambi√©n ese gusto de hacer cosas distintas y sin miedo al exito. üöÄ`
                        },
                        {
                            carousel: "loquita",
                            text: `Y hablando de cosas locas, no pueden faltar todas tus locuras, que es bac√°n el que puedas ser t√∫ conmigo. Y verte haciendo locuritas, cantando en el auto, riendo, poniendo caritas.
                            <br><br>
                            Verte ser t√∫ es lo que me hace m√°s feliz. Y que sientas esa confianza de poder hacerlo a mi lado me hace ser el hombre m√°s ofortunado del mundo, WIIIICKEEEEEED. üßô‚Äç‚ôÄÔ∏è`
                        },
                        {
                            carousel: "rino",
                            text: `ü¶è UN RINOOOOOO. Qu√© loco que haya rinocerontes en todos lados. Yo creo que esto es algo que no se habla mucho, pero deber√≠a ser un tema de estudio.
                            <br><br>
                            Porque no tiene sentido que un animal tan poco comun y que te haya puesto este apodo por ninguna razon, y que ahora es parte de nuestras vidas y aparece hasta en la tapa del ba√±o. Pero es algo que me encanta y son se√±ales que me aseguran de que eres t√∫. Siempre has sido t√∫.`
                        },
                        {
                            carousel: "heladitos",
                            text: `üç¶ Y puede que hayas pensado de que se me habia pasado todas estas fotos y te juro que vi√©ndolas y juntandolas me mataba de las risas de tus caritas, todas manchas y creo que faltan muchas fotos mas.
                            <br><br>
                            Me encanta que te guste tomar helado y que seas tan desordenada para tomar Y creo que esta es una parte de ti que adoro. Me encanta poder regalarte heladitos y verte comer como si tuvieras 2, pero es tu esencia y de eso es de lo que yo me he enamorado todos estos a√±os, de ti, de c√≥mo t√∫ eres.`
                        },
                        {
                            carousel: "linda",
                            text: `Y pasamos tristemente a la √∫ltima secci√≥n de fotitos, en donde como puedes ver est√°s t√∫, que eres tan linda te amo tanto.
                            <br><br>
                            Es loco ver lo r√°pido que pasa el tiempo. Te juro que yo miraba las fotos desde que reci√©n apareci√≥ tu cara en Google Fotos, hace un poquito m√°s de 4 a√±os atr√°s, de cuando nos conocimos en mi casa en ese carrete muy random, y te juro que a veces es como si esto fuera ayer. La vida pasa tan r√°pido, o el tiempo contigo pasa aun mas r√°pido, que me hace sentir que lo hemos disfrutado a concho.
                            <br><br>
                            Hemos hecho locuras terribles, pero muy entretenidas: desde que te fuiste con nosotros al sur cuando llev√°bamos casi una semana juntos, hasta todos los viajes que hemos hecho con mi familia y con tu familia. Conocer San Andr√©s, B√∫zios, conocer a tus amigos, mis amigos y compartir las amistades. Siento que, para m√≠, ver todas esas fotos da nostalgia y harta felicidad de saber que estos a√±os han sido muy bacanes y muy bonitos, y siento que gran parte de eso es gracias a estar contigo y a tenerte a mi lado.
                            <br><br>
                            Hemos crecido mucho. Viendo esas fotos, los dos tenemos cara de ni√±os y que pasamos de ser unos vecinos en Chicureo, compa√±eros de Proyecta, de ser yo tu chofer que te llevaba a los carretes porque me quedaba ah√≠ cerca y te iba a ir a buscar, a pasar a tener una muy bonita relaci√≥n, una muy bonita polola. Siento que he crecido mucho contigo y hemos vivido etapas muy importantes. Me ayudaste en muchas cosas en la U, a un poco enderezarme, a quererme, a entenderme y tambi√©n a creer en m√≠. Siento que has sido un aporte fundamental para que yo me crea el cuento y sepa que s√≠, yo soy capaz y s√≠ soy bac√°n. Yo creo que t√∫ has influenciado mucho en eso tambi√©n.
                            <br><br>
                            Hemos comenzado juntos este mundo laboral donde ahora los dos somos adultos responsables con trabajos y obligaciones. Yo creo que los dos estamos muy felices con lo que estudiamos y en d√≥nde hemos trabajado, y a pesar de que t√∫ tuviste tu crisis vocacional, para eso siempre hemos estado ac√°, para apoyarte en todo lo que necesites, guiarte tambi√©n si es que necesitas apoyo en eso. As√≠ mismo como t√∫ me has dado todo ese apoyo, yo tambi√©n estuve y estar√© ah√≠ para todo.
                            <br><br>
                            Me da risa que siempre he escuchado que las relaciones tienen como este periodo de "luna de miel" que dura tres meses y que despu√©s todo es distinto, pero yo creo que la gente no sabe lo que es realmente encontrar a alguien que calza contigo. Porque yo siento que desde el momento en que salimos, el momento en que comenzamos esta bonita relaci√≥n, esa luna de miel no se ha acabado. S√≠, hemos tenido sus discusiones, momentos dif√≠ciles, pero siento que todas esas cosas nos han hecho m√°s fuertes, m√°s unidos, y esas son las cosas que al final hacen que una pareja crezca. <strong>Siempre el tenerte a mi lado como amiga, como confidente, como polola, ha sido lo mejor que me ha pasado en esta vida.</strong> üíñ
                            <br><br>
                            Te quer√≠a tambi√©n dar las gracias por todo, porque siento que estos 4 a√±os, y donde estoy ahora mismo, no hubiera sido lo mismo sin ti. T√∫ has sido un pilar fundamental en todos mis logros. Aunque no es quitarme el m√©rito de las cosas que yo he hecho, s√≠ has sido un impulso, una motivaci√≥n, una fuente de energ√≠a gigante para sacar adelante todos los proyectos que yo me propongo. S√© que siempre has estado a mi lado apoy√°ndome en cada fracaso, en cada logro, en cada premio, y yo creo que sin ti nunca hubiera sido lo mismo. As√≠ que gracias por ser esa motivaci√≥n.
                            <br><br>
                            Te amo con todo mi coraz√≥n y me emociona mucho saber todo lo que se nos viene. Si ya llevamos 4 a√±os, que es harto tiempo, me imagino c√≥mo ser√° todo lo que se viene proyectos de vida, viajar, crecer... al final, vivir una vida contigo es vivir la vida, que es lo que m√°s feliz me hace. ‚ù§Ô∏è
                            <br><br>
                            üè∞‚ú® Y falta mencionar Orlandoooo, viaje que me tiene demasiado emocionado y feliz, pero no solamente porque vamos a Orlando y vamos a Disney y vamos a conocer a Mickey Mouse y a Harry Potter, estoy muy feliz porque siento que este va a ser un hito importante en nuestra relaci√≥n. El viajar a otro pa√≠s solos nos va a ayudar a crecer m√°s de lo que ya hemos crecido, y estoy m√°s que seguro de que me va a recalcar y asegurar de que siempre ser√°s y fuiste t√∫. Te amo mucho.
                            <br><br>
                            As√≠ que gracias por estos cuatro a√±os que, de verdad, los siento como nada, que han volado, pero siento que es el comienzo de todo este proyecto de vida que de la mano vamos a construir. Te amo mucho y espero que te haya gustado este peque√±o regalo. Ahora se viene un ultimo regalo, el botoncito donde, cuando lo aprietes, te va a llevar a la √∫ltima parte del regalo para que lo disfrutes (y lo disfrutemos) en este viaje que se nos viene.
                            <br><br>
                            <strong style="font-size: 1.3rem;">Te amo. üíï</strong>`
                        }
                    ]
                }
            },
            mounted() {
                this.loadAllCarousels();
                this.setupScrollObserver();
            },
            methods: {
                // --- LOGIN ---
                checkPassword() {
                    const input = this.passwordInput.toLowerCase().trim();
                    if (input === this.correctPassword) {
                        this.lanzarConfetiEntrada();
                        this.currentPhase = 'letter';
                        setTimeout(() => window.scrollTo(0,0), 100);
                    } else {
                        this.triggerShake();
                        this.attempts++;
                        this.passwordInput = ''; 
                        if (this.attempts === 1) this.hintsList.push("Florencia");
                        if (this.attempts === 2) this.hintsList.push("Nombre tierno");
                        if (this.attempts === 3) this.hintsList.push("Animal");
                    }
                },
                triggerShake() {
                    this.isShaking = true;
                    setTimeout(() => { this.isShaking = false; }, 500);
                },
                lanzarConfetiEntrada() {
                    confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors: ['#ff9a9e', '#fad0c4', '#ffffff'] });
                },

                // --- CARRUSELES ---
                async loadAllCarousels() {
                    const folders = ['conocimos', 'proyecta', 'amigos', 'familia', 'viajes', 'carrera', 'comida', 'nosotros', 'loquita', 'rino', 'heladitos', 'linda'];
                    
                    for (const folder of folders) {
                        try {
                            const response = await fetch(`/api/fotos/${folder}/`);
                            const data = await response.json();
                            this.carouselImages[folder] = data.fotos;
                            this.carouselIndexes[folder] = 0;
                            
                            // Auto-avance del carrusel
                            this.carouselIntervals[folder] = setInterval(() => {
                                this.nextImage(folder);
                            }, 4000);
                        } catch (error) {
                            console.error(`Error cargando fotos de ${folder}:`, error);
                        }
                    }
                },

                nextImage(folder) {
                    if (!this.carouselImages[folder]) return;
                    const total = this.carouselImages[folder].length;
                    this.carouselIndexes[folder] = (this.carouselIndexes[folder] + 1) % total;
                },

                prevImage(folder) {
                    if (!this.carouselImages[folder]) return;
                    const total = this.carouselImages[folder].length;
                    this.carouselIndexes[folder] = (this.carouselIndexes[folder] - 1 + total) % total;
                },

                goToImage(folder, index) {
                    this.carouselIndexes[folder] = index;
                },

                // --- SCROLL OBSERVER ---
                setupScrollObserver() {
                    setTimeout(() => {
                        const observer = new IntersectionObserver((entries) => {
                            entries.forEach(entry => {
                                if (entry.isIntersecting) {
                                    entry.target.classList.add('visible');
                                }
                            });
                        }, { threshold: 0.2 });

                        document.querySelectorAll('.story-block').forEach(el => {
                            observer.observe(el);
                        });
                    }, 500);
                }
            }
        }).mount('#app')
    </script>
</body>
</html>
